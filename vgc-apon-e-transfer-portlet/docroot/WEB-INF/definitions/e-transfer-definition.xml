<?xml version="1.0"?>
<workflow-definition xmlns="urn:liferay.com:liferay-workflow_6.2.0"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="urn:liferay.com:liferay-workflow_6.2.0 http://www.liferay.com/dtd/liferay-workflow-definition_6_2_0.xsd">
	<name>E Transfer</name>
	<description>E Transfer workflow process action.</description>
	<version>1</version>
    <state>
        <name>approved</name>
        <metadata><![CDATA[{"terminal":true,"xy":[790,35]}]]></metadata>
        <actions>
            <action>
                <name>approve</name>
                <script><![CDATA[
				import com.liferay.portal.kernel.workflow.WorkflowStatusManagerUtil;
				import com.liferay.portal.kernel.workflow.WorkflowConstants;
				WorkflowStatusManagerUtil.updateStatus(WorkflowConstants.toStatus("approved"), workflowContext);

				]]></script>
                <script-language>groovy</script-language>
                <execution-type>onEntry</execution-type>
            </action>
        </actions>
    </state>
    <task>
        <name>update</name>
        <metadata><![CDATA[{"transitions":{"organization team":{"bendpoints":[[297,334]]},"resubmit":{"bendpoints":[[351,222]]}},"xy":[429,310]}]]></metadata>
        <actions>
            <action>
                <name>reject</name>
                <script><![CDATA[
					Packages.com.liferay.portal.kernel.workflow.WorkflowStatusManagerUtil.updateStatus(Packages.com.liferay.portal.kernel.workflow.WorkflowConstants.toStatus("draft"), workflowContext);
				]]></script>
                <script-language>javascript</script-language>
                <execution-type>onEntry</execution-type>
            </action>
            <notification>
                <name>Creator Modification Notification</name>
                <template>/* specify task notification template */</template>
                <template-language>freemarker</template-language>
                <notification-type>user-notification</notification-type>
                <execution-type>onAssignment</execution-type>
            </notification>
        </actions>
        <assignments>
            <user></user>
        </assignments>
        <transitions>
            <transition>
                <name>resubmit</name>
                <target>Current Dept. Supervisor(FG≥30/31)</target>
                <default>true</default>
            </transition>
        </transitions>
    </task>
    <task>
        <name>Current Dept. Supervisor(FG≥30/31)</name>
        <metadata><![CDATA[{"transitions":{"approve":{"bendpoints":[],"xy":[-24,-2]},"reject":{"bendpoints":[[308,264]]},"resubmit":{"bendpoints":[[351,222]]}},"xy":[220,15]}]]></metadata>
        <actions>
            <action>
                <name>resubmit</name>
                <script><![CDATA[
					import com.liferay.portal.kernel.workflow.WorkflowStatusManagerUtil;
									import com.liferay.portal.kernel.workflow.WorkflowConstants;
									WorkflowStatusManagerUtil.updateStatus(WorkflowConstants.toStatus("pending"), workflowContext);
				]]></script>
                <script-language>groovy</script-language>
                <execution-type>onEntry</execution-type>
            </action>
        </actions>
        <assignments>
            <scripted-assignment>
                <script><![CDATA[import com.liferay.portal.kernel.util.GetterUtil;
import com.liferay.portal.kernel.workflow.WorkflowConstants;
import com.liferay.portal.service.ServiceContext;
import com.liferay.portal.model.Role;

long companyId = GetterUtil.getLong((String) workflowContext.get(WorkflowConstants.CONTEXT_COMPANY_ID));
ServiceContext serviceContext = (ServiceContext) workflowContext.get(WorkflowConstants.CONTEXT_SERVICE_CONTEXT);
Role supervisorRole = (Role) serviceContext.getAttribute("vgcapon_e_transfer_current_supervisor");
roles = new ArrayList<Role>();
roles.add(supervisorRole);
user = null;]]></script>
                <script-language>groovy</script-language>
            </scripted-assignment>
        </assignments>
        <transitions>
            <transition>
                <name>approve</name>
                <target>Receiving Dept. Supervisor(FG≥30/31)</target>
            </transition>
            <transition>
                <name>reject</name>
                <target>update</target>
                <default>true</default>
            </transition>
        </transitions>
    </task>
    <state>
        <name>created</name>
        <metadata><![CDATA[{"transitions":{"reject":{"bendpoints":[[155,260]],"xy":[6,-18]},"Current Dept. Supervisor(FG≥30/31)":{"bendpoints":[]},"review":{"bendpoints":[],"xy":[-19,1]}},"xy":[90,30]}]]></metadata>
        <initial>true</initial>
        <transitions>
            <transition>
                <name>review</name>
                <target>Current Dept. Supervisor(FG≥30/31)</target>
                <default>true</default>
            </transition>
        </transitions>
    </state>
    <task>
        <name>Receiving Dept. Supervisor(FG≥30/31)</name>
        <metadata><![CDATA[{"transitions":{"approve":{"bendpoints":[],"xy":[-24,-2]},"reject":{"bendpoints":[]}},"xy":[350,20]}]]></metadata>
        <actions>
            <action>
                <name>approve</name>
                <script><![CDATA[
					import com.liferay.portal.kernel.workflow.WorkflowStatusManagerUtil;
									import com.liferay.portal.kernel.workflow.WorkflowConstants;
									WorkflowStatusManagerUtil.updateStatus(101, workflowContext);
				]]></script>
                <script-language>groovy</script-language>
                <execution-type>onEntry</execution-type>
            </action>
        </actions>
        <assignments>
            <scripted-assignment>
                <script><![CDATA[import com.liferay.portal.kernel.util.GetterUtil;
import com.liferay.portal.kernel.workflow.WorkflowConstants;
import com.liferay.portal.service.ServiceContext;
import com.liferay.portal.model.Role;

long companyId = GetterUtil.getLong((String) workflowContext.get(WorkflowConstants.CONTEXT_COMPANY_ID));
ServiceContext serviceContext = (ServiceContext) workflowContext.get(WorkflowConstants.CONTEXT_SERVICE_CONTEXT);
Role supervisorRole = (Role) serviceContext.getAttribute("vgcapon_e_transfer_receiving_supervisor");
roles = new ArrayList<Role>();
roles.add(supervisorRole);
user = null;]]></script>
                <script-language>groovy</script-language>
            </scripted-assignment>
        </assignments>
        <transitions>
            <transition>
                <name>approve</name>
                <target>Organization Partner</target>
            </transition>
            <transition>
                <name>reject</name>
                <target>update</target>
            </transition>
        </transitions>
    </task>
    <task>
        <name>Organization Partner</name>
        <metadata><![CDATA[{"transitions":{"approve":{"bendpoints":[],"xy":[-19,-2]},"reject":{"bendpoints":[]}},"xy":[500,20]}]]></metadata>
        <actions>
            <action>
                <name>approve</name>
                <script><![CDATA[
					import com.liferay.portal.kernel.workflow.WorkflowStatusManagerUtil;
									import com.liferay.portal.kernel.workflow.WorkflowConstants;
									WorkflowStatusManagerUtil.updateStatus(102, workflowContext);
				]]></script>
                <script-language>groovy</script-language>
                <execution-type>onEntry</execution-type>
            </action>
        </actions>
        <assignments>
            <scripted-assignment>
                <script><![CDATA[import com.liferay.portal.kernel.util.GetterUtil;
import com.liferay.portal.kernel.workflow.WorkflowConstants;
import com.liferay.portal.service.ServiceContext;
import com.liferay.portal.model.Role;

long companyId = GetterUtil.getLong((String) workflowContext.get(WorkflowConstants.CONTEXT_COMPANY_ID));
ServiceContext serviceContext = (ServiceContext) workflowContext.get(WorkflowConstants.CONTEXT_SERVICE_CONTEXT);
Role[] adminRoles = (Role[]) serviceContext.getAttribute("vgcapon_e_transfer_et_organization_partner");
roles = new ArrayList<Role>();
for(Role role : adminRoles){
	roles.add(role);
}
user = null;]]></script>
                <script-language>groovy</script-language>
            </scripted-assignment>
        </assignments>
        <transitions>
            <transition>
                <name>approve</name>
                <target>Controlling Manager</target>
            </transition>
            <transition>
                <name>reject</name>
                <target>update</target>
            </transition>
        </transitions>
    </task>
    <task>
        <name>Controlling Manager</name>
        <metadata><![CDATA[{"transitions":{"approve":{"bendpoints":[],"xy":[-24,-2]},"reject":{"bendpoints":[]}},"xy":[640,20]}]]></metadata>
        <actions>
            <action>
                <name>approve</name>
                <script><![CDATA[
					import com.liferay.portal.kernel.workflow.WorkflowStatusManagerUtil;
									import com.liferay.portal.kernel.workflow.WorkflowConstants;
									WorkflowStatusManagerUtil.updateStatus(103, workflowContext);
				]]></script>
                <script-language>groovy</script-language>
                <execution-type>onEntry</execution-type>
            </action>
        </actions>
        <assignments>
            <scripted-assignment>
                <script><![CDATA[import com.liferay.portal.kernel.util.GetterUtil;
import com.liferay.portal.kernel.workflow.WorkflowConstants;
import com.liferay.portal.service.ServiceContext;
import com.liferay.portal.model.Role;

long companyId = GetterUtil.getLong((String) workflowContext.get(WorkflowConstants.CONTEXT_COMPANY_ID));
ServiceContext serviceContext = (ServiceContext) workflowContext.get(WorkflowConstants.CONTEXT_SERVICE_CONTEXT);
Role[] adminRoles = (Role[]) serviceContext.getAttribute("vgcapon_e_transfer_et_controlling_manager");
roles = new ArrayList<Role>();
for(Role role : adminRoles){
	roles.add(role);
}
user = null;]]></script>
                <script-language>groovy</script-language>
            </scripted-assignment>
        </assignments>
        <transitions>
            <transition>
                <name>approve</name>
                <target>approved</target>
                <default>true</default>
            </transition>
            <transition>
                <name>reject</name>
                <target>update</target>
            </transition>
        </transitions>
    </task>
</workflow-definition>
